DROP DATABASE IF EXISTS molou;
CREATE DATABASE molou;
USE molou;

DROP TABLE IF EXISTS doc_info;
CREATE TABLE doc_info (
	ID		varchar(20)	not null,
	NUM		int			not null,
	PW		varchar(20)	not null,
	NAME	varchar(25)	not null,
	DPT		varchar(20),	-- 근무지
	PRIMARY KEY(ID)
);

INSERT INTO doc_info(ID,NUM,PW,NAME,DPT) VALUES('phy1',8200,'1111','Ji Hong Ahn','A hospital');
INSERT INTO doc_info(ID,NUM,PW,NAME,DPT) VALUES('pulm1',1111,'2222','Jung Jae Kim','B hospital');
INSERT INTO doc_info(ID,NUM,PW,NAME,DPT) VALUES('card1',2222,'3333','Chae Yoon Lim','C hospital');
INSERT INTO doc_info(ID,NUM,PW,NAME,DPT) VALUES('otol4',3333,'4444','Yoo Jin Lee','D hospital');
INSERT INTO doc_info(ID,NUM,PW,NAME,DPT) VALUES('derm5',4444,'5555','Sung Jun Park','C hospital');

DROP TABLE IF EXISTS pac_info;
CREATE TABLE pac_info (
	CODE		int				not null,
	NAME		varchar(25)		not null,
	AGE			int				not null,
	ADDRESS		varchar(100)	not null,
	CALLNUM		varchar(20)		not null,
	PRIMARY KEY(CODE)
);

INSERT INTO pac_info(CODE,NAME,AGE,ADDRESS,CALLNUM) VALUES(1,'yeonglan lee',24,'331-755','010-4558-2446');
INSERT INTO pac_info(CODE,NAME,AGE,ADDRESS,CALLNUM) VALUES(2,'jina yoo',38,'234-754','010-8787-5882');
INSERT INTO pac_info(CODE,NAME,AGE,ADDRESS,CALLNUM) VALUES(3,'sooyang kang',16,'584-476','010-7995-6282');
INSERT INTO pac_info(CODE,NAME,AGE,ADDRESS,CALLNUM) VALUES(4,'jiwoong gang',40,'664-721','010-1245-6974');
INSERT INTO pac_info(CODE,NAME,AGE,ADDRESS,CALLNUM) VALUES(5,'ryutae hyun',29,'257-882','010-4567-8878');

DROP TABLE IF EXISTS med_record;
CREATE TABLE med_record (
	DOCID		varchar(20)	not null,
	PACCODE		int			not null,
	MEDDATE		DATE		not null,
	OXYGEN		varchar(20)	default '0',
	TEMPERATURE	varchar(20)	default '0',
	FOREIGN KEY(DOCID) REFERENCES doc_info(ID),
	FOREIGN KEY(PACCODE) REFERENCES pac_info(CODE)
);

INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('phy1',1,'2021-11-21','97','36.5');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('phy1',1,'2021-11-22','96','36.4');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('card1',5,'2021-11-23','95','36.1');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('card1',5,'2021-11-24','97','37.0');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('phy1',2,'2021-11-25','96','36.5');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('pulm1',3,'2021-11-27','85','35.9');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('derm5',5,'2021-12-01','98','36.7');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('derm5',5,'2021-12-02','95','36.8');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('otol4',5,'2021-12-03','92','35.5');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('otol4',4,'2021-12-04','98','38.5');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('otol4',4,'2021-12-06','91','35.6');
INSERT INTO med_record(DOCID,PACCODE,MEDDATE,OXYGEN,TEMPERATURE) VALUES('otol4',4,'2021-12-11','89','35.8');

DROP USER IF EXISTS 'connectuser'@'%';
CREATE USER 'connectuser'@'%' IDENTIFIED BY '1234';
GRANT ALL ON molou.* to 'connectuser'@'%';
